<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>
<body>
    <%- include('../partials/nav') %>

    <section class="services-hero">
        <div class="services-hero-content">
            <h1>Our Services</h1>
            <p>Comprehensive digital solutions for your business growth.</p>
        </div>
    </section>

    <section class="services-tabs">
        <div class="section-container">
            <div class="tab-buttons">
                <button class="tab-btn active" data-tab="web-development">Web Development</button>
                <button class="tab-btn" data-tab="branding">Branding</button>
                <button class="tab-btn" data-tab="marketing">Digital Marketing</button>
                <button class="tab-btn" data-tab="ecommerce">E-commerce</button>
            </div>

            <div class="tab-content">
                <div id="web-development" class="service-content active">
                    <h3>Website Design & Development</h3>
                    <p>Custom websites tailored to your brand and industry needs with responsive design and SEO optimization.</p>
                    <ul>
                        <li>Responsive Web Design</li>
                        <li>Custom Development</li>
                        <li>CMS Integration</li>
                        <li>SEO Optimization</li>
                        <li>Performance Optimization</li>
                    </ul>
                    <div class="service-image">
                        <img src="/images/web-dev.jpg" alt="Web Development">
                    </div>
                </div>

                <div id="branding" class="service-content">
                    <h3>Branding & Graphic Design</h3>
                    <p>Create a powerful brand identity that stands out in today's competitive market.</p>
                    <ul>
                        <li>Logo Design</li>
                        <li>Brand Identity</li>
                        <li>Marketing Materials</li>
                        <li>Brand Guidelines</li>
                        <li>Visual Strategy</li>
                    </ul>
                    <div class="service-image">
                        <img src="/images/branding.jpg" alt="Branding">
                    </div>
                </div>

                <div id="marketing" class="service-content">
                    <h3>Digital Marketing</h3>
                    <p>Comprehensive marketing strategies to increase your online visibility and conversions.</p>
                    <ul>
                        <li>SEO & SEM</li>
                        <li>Social Media Marketing</li>
                        <li>Content Marketing</li>
                        <li>Email Marketing</li>
                        <li>Analytics & Reporting</li>
                    </ul>
                </div>

                <div id="ecommerce" class="service-content">
                    <h3>E-commerce Solutions</h3>
                    <p>Build and optimize your online store to maximize sales and customer experience.</p>
                    <ul>
                        <li>Online Store Development</li>
                        <li>Payment Integration</li>
                        <li>Inventory Management</li>
                        <li>Conversion Optimization</li>
                        <li>Mobile Commerce</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="pricing-packages">
        <div class="section-container">
            <div class="section-header">
                <h2>Service Packages</h2>
                <p>Choose the perfect package for your business needs</p>
            </div>
            <div class="packages-grid">
                <div class="package-card">
                    <div class="package-header">
                        <h3>Starter</h3>
                        <div class="price">$2,500 - $5,000</div>
                        <p class="package-subtitle">Perfect for small businesses</p>
                    </div>
                    <div class="package-features">
                        <h4>Includes:</h4>
                        <ul>
                            <li>5-page responsive website</li>
                            <li>Basic SEO setup</li>
                            <li>Contact form integration</li>
                            <li>Mobile optimization</li>
                            <li>3 months support</li>
                        </ul>
                    </div>
                    <div class="package-timeline">
                        <strong>Timeline:</strong> 2-3 weeks
                    </div>
                    <button class="package-select-btn" data-package="Starter" data-price="$2,500 - $5,000">
                        <i class="fas fa-arrow-right"></i> Select Starter Package
                    </button>
                </div>
                
                <div class="package-card featured">
                    <div class="package-header">
                        <h3>Professional</h3>
                        <div class="price">$5,000 - $15,000</div>
                        <p class="package-subtitle">Most popular choice</p>
                    </div>
                    <div class="package-features">
                        <h4>Includes:</h4>
                        <ul>
                            <li>10-page custom website</li>
                            <li>Advanced SEO optimization</li>
                            <li>E-commerce functionality</li>
                            <li>CMS integration</li>
                            <li>Analytics setup</li>
                            <li>6 months support</li>
                        </ul>
                    </div>
                    <div class="package-timeline">
                        <strong>Timeline:</strong> 4-6 weeks
                    </div>
                    <button class="package-select-btn" data-package="Professional" data-price="$5,000 - $15,000">
                        <i class="fas fa-arrow-right"></i> Select Professional Package
                    </button>
                </div>
                
                <div class="package-card">
                    <div class="package-header">
                        <h3>Enterprise</h3>
                        <div class="price">$15,000+</div>
                        <p class="package-subtitle">For large-scale projects</p>
                    </div>
                    <div class="package-features">
                        <h4>Includes:</h4>
                        <ul>
                            <li>Unlimited pages</li>
                            <li>Custom functionality</li>
                            <li>Advanced integrations</li>
                            <li>Multi-language support</li>
                            <li>Performance optimization</li>
                            <li>12 months support</li>
                        </ul>
                    </div>
                    <div class="package-timeline">
                        <strong>Timeline:</strong> 8-12 weeks
                    </div>
                    <button class="package-select-btn" data-package="Enterprise" data-price="$15,000+">
                        <i class="fas fa-arrow-right"></i> Select Enterprise Package
                    </button>
                </div>
            </div>
        </div>
    </section>

    <section class="pricing-details">
        <div class="section-container">
            <div class="section-header">
                <h2>Pricing Information</h2>
                <p>Transparent pricing with no hidden fees</p>
            </div>
            <div class="pricing-info">
                <div class="pricing-factors">
                    <h3>Project Budget Factors</h3>
                    <div class="factors-grid">
                        <div class="factor">
                            <h4>Website Complexity</h4>
                            <ul>
                                <li>Basic: $2,500 - $5,000</li>
                                <li>Intermediate: $5,000 - $10,000</li>
                                <li>Advanced: $10,000 - $25,000</li>
                                <li>Enterprise: $25,000+</li>
                            </ul>
                        </div>
                        <div class="factor">
                            <h4>Additional Services</h4>
                            <ul>
                                <li>Logo Design: $500 - $2,000</li>
                                <li>SEO Setup: $1,000 - $3,000</li>
                                <li>Content Creation: $100 - $300/page</li>
                                <li>E-commerce: $2,000 - $8,000</li>
                            </ul>
                        </div>
                        <div class="factor">
                            <h4>Ongoing Services</h4>
                            <ul>
                                <li>Monthly Maintenance: $200 - $500</li>
                                <li>Digital Marketing: $1,000 - $5,000/month</li>
                                <li>Content Updates: $75 - $150/hour</li>
                                <li>Technical Support: $100 - $200/hour</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="payment-terms">
                    <h3>Payment Terms</h3>
                    <div class="terms-grid">
                        <div class="term">
                            <h4>Project Payment Schedule</h4>
                            <ul>
                                <li>50% deposit to start project</li>
                                <li>25% at design approval</li>
                                <li>25% upon project completion</li>
                            </ul>
                        </div>
                        <div class="term">
                            <h4>Accepted Payment Methods</h4>
                            <ul>
                                <li>Bank transfer</li>
                                <li>Credit/Debit cards</li>
                                <li>PayPal</li>
                                <li>Cryptocurrency (Bitcoin, Ethereum)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="project-info">
        <div class="section-container">
            <div class="section-header">
                <h2>Project Information</h2>
                <p>What to expect when working with us</p>
            </div>
            <div class="project-details">
                <div class="detail-card">
                    <i class="fas fa-clock"></i>
                    <h3>Project Timeline</h3>
                    <p>Most projects are completed within 2-8 weeks depending on complexity. We provide detailed timelines during the discovery phase.</p>
                </div>
                <div class="detail-card">
                    <i class="fas fa-users"></i>
                    <h3>Dedicated Team</h3>
                    <p>Each project gets a dedicated team including a project manager, designer, and developer to ensure quality and communication.</p>
                </div>
                <div class="detail-card">
                    <i class="fas fa-sync"></i>
                    <h3>Revisions Included</h3>
                    <p>All packages include 3 rounds of revisions. Additional revisions are available at $150/hour.</p>
                </div>
                <div class="detail-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Quality Guarantee</h3>
                    <p>We guarantee our work with 30-day bug fixes and provide comprehensive testing before launch.</p>
                </div>
                <div class="detail-card">
                    <i class="fas fa-globe-americas"></i>
                    <h3>Global Market Ready</h3>
                    <p>We design solutions that help local businesses expand internationally with multi-language support and global SEO optimization.</p>
                </div>
                <div class="detail-card">
                    <i class="fas fa-chart-line"></i>
                    <h3>Growth-Focused Strategy</h3>
                    <p>Every project includes scalable architecture and growth analytics to support your business expansion from local to global markets.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="process">
        <div class="section-container">
            <div class="section-header">
                <h2>Our Process</h2>
                <p>How we deliver exceptional results</p>
            </div>
            <div class="process-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h4>Discovery</h4>
                    <p>We analyze your business, goals, and target audience.</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h4>Strategy</h4>
                    <p>We develop a customized digital strategy for your needs.</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h4>Implementation</h4>
                    <p>We execute the strategy with precision and attention to detail.</p>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <h4>Optimization</h4>
                    <p>We continuously monitor and optimize for better results.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Package Selection Modal -->
    <div id="packageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Request Quote - <span id="selectedPackage"></span></h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="packageForm" action="/package-quote" method="POST">
                    <input type="hidden" id="packageType" name="package" value="">
                    <input type="hidden" id="packagePrice" name="price" value="">
                    
                    <!-- Error display area -->
                    <div id="formErrors" class="form-errors" style="display: none;">
                        <div class="error-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Please fix the following issues:</span>
                        </div>
                        <ul id="errorList"></ul>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" name="firstName" value="<%= typeof formData !== 'undefined' ? formData.firstName || '' : '' %>" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" name="lastName" value="<%= typeof formData !== 'undefined' ? formData.lastName || '' : '' %>" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" value="<%= typeof formData !== 'undefined' ? formData.email || '' : '' %>" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" value="<%= typeof formData !== 'undefined' ? formData.phone || '' : '' %>">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="company">Company Name</label>
                        <input type="text" id="company" name="company" value="<%= typeof formData !== 'undefined' ? formData.company || '' : '' %>">
                    </div>
                    
                    <div class="form-group">
                        <label for="website">Current Website (if any)</label>
                        <input type="url" id="website" name="website" value="<%= typeof formData !== 'undefined' ? formData.website || '' : '' %>" placeholder="https://">
                    </div>
                    
                    <div class="form-group">
                        <label for="projectDescription">Project Description *</label>
                        <textarea id="projectDescription" name="message" rows="4" placeholder="Tell us about your project requirements..." required><%= typeof formData !== 'undefined' ? formData.message || '' : '' %></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="timeline">Preferred Timeline</label>
                            <select id="timeline" name="timeline">
                                <option value="">Select timeline</option>
                                <option value="ASAP" <%= typeof formData !== 'undefined' && formData.timeline === 'ASAP' ? 'selected' : '' %>>ASAP</option>
                                <option value="1-2 weeks" <%= typeof formData !== 'undefined' && formData.timeline === '1-2 weeks' ? 'selected' : '' %>>1-2 weeks</option>
                                <option value="1 month" <%= typeof formData !== 'undefined' && formData.timeline === '1 month' ? 'selected' : '' %>>1 month</option>
                                <option value="2-3 months" <%= typeof formData !== 'undefined' && formData.timeline === '2-3 months' ? 'selected' : '' %>>2-3 months</option>
                                <option value="Flexible" <%= typeof formData !== 'undefined' && formData.timeline === 'Flexible' ? 'selected' : '' %>>Flexible</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="budget">Budget Range</label>
                            <select id="budget" name="budget">
                                <option value="">Select budget</option>
                                <option value="Under $5,000" <%= typeof formData !== 'undefined' && formData.budget === 'Under $5,000' ? 'selected' : '' %>>Under $5,000</option>
                                <option value="$5,000 - $10,000" <%= typeof formData !== 'undefined' && formData.budget === '$5,000 - $10,000' ? 'selected' : '' %>>$5,000 - $10,000</option>
                                <option value="$10,000 - $25,000" <%= typeof formData !== 'undefined' && formData.budget === '$10,000 - $25,000' ? 'selected' : '' %>>$10,000 - $25,000</option>
                                <option value="$25,000+" <%= typeof formData !== 'undefined' && formData.budget === '$25,000+' ? 'selected' : '' %>>$25,000+</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="secondary-btn" onclick="closeModal()">Cancel</button>
                        <button type="submit" class="primary-btn">
                            <i class="fas fa-paper-plane"></i> Request Quote
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Success Message Modal -->
    <% if (typeof successMessage !== 'undefined' && successMessage) { %>
        <div class="message-overlay" id="messageOverlay">
            <div class="success-message-modal" id="successMessage">
                <div class="message-content">
                    <div class="message-icon success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="message-text">
                        <h3>Quote Request Sent Successfully!</h3>
                        <p><%= successMessage %></p>
                        <div class="message-details">
                            <div class="detail-item">
                                <i class="fas fa-clock"></i>
                                <span>We'll respond within 24 hours</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-envelope"></i>
                                <span>Check your email for confirmation</span>
                            </div>
                        </div>
                    </div>
                    <button class="close-btn" data-action="close-message">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
    <% } %>



    <%- include('../partials/footer') %>

    <script src="/js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Package selection modal functionality
            const modal = document.getElementById('packageModal');
            const packageButtons = document.querySelectorAll('.package-select-btn');
            const closeBtn = document.querySelector('.close-modal');
        
        // Open modal when package button is clicked
        packageButtons.forEach(button => {
            button.addEventListener('click', function() {
                console.log('Package button clicked:', this.getAttribute('data-package'));
                const packageName = this.getAttribute('data-package');
                const packagePrice = this.getAttribute('data-price');
                
                document.getElementById('selectedPackage').textContent = packageName + ' Package';
                document.getElementById('packageType').value = packageName;
                document.getElementById('packagePrice').value = packagePrice;
                
                // Clear any previous errors
                const formErrors = document.getElementById('formErrors');
                if (formErrors) {
                    formErrors.style.display = 'none';
                }
                
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            });
        });
        
        // Close modal functions
        window.closeModal = function() {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            // Reset form when closing
            document.getElementById('packageForm').reset();
        }
        
        closeBtn.addEventListener('click', closeModal);
        
        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target === modal) {
                closeModal();
            }
        });
        
        // Form submission with loading state
        document.getElementById('packageForm').addEventListener('submit', function(e) {
            // Show loading state
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            submitBtn.disabled = true;
            
            // Let form submit naturally to server
        });
        
        // Message handling functions
        function closeMessage() {
            const overlay = document.getElementById('messageOverlay');
            if (overlay) {
                overlay.classList.add('fade-out');
                setTimeout(() => {
                    overlay.remove();
                }, 300);
            }
        }
        
        // Add event listeners for close buttons
        const messageCloseButtons = document.querySelectorAll('[data-action="close-message"]');
        messageCloseButtons.forEach(button => {
            button.addEventListener('click', closeMessage);
        });
        
        // Auto-hide success message and clean URL
        const successMessage = document.getElementById('successMessage');
        if (successMessage) {
            // Clean URL by removing success query parameter
            if (window.location.search.includes('success=')) {
                const url = new URL(window.location);
                url.searchParams.delete('success');
                window.history.replaceState({}, document.title, url.pathname);
            }
            
            setTimeout(() => {
                closeMessage();
            }, 8000);
        }
        
        // Show modal with errors if there are validation errors
        <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
            // Show the package modal with errors
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Set the package info from form data
            <% if (typeof formData !== 'undefined' && formData.package) { %>
                document.getElementById('selectedPackage').textContent = '<%= formData.package %>' + ' Package';
                document.getElementById('packageType').value = '<%= formData.package %>';
                document.getElementById('packagePrice').value = '<%= formData.price || '' %>';
            <% } %>
            
            // Show errors in the modal
            const formErrors = document.getElementById('formErrors');
            const errorList = document.getElementById('errorList');
            if (formErrors && errorList) {
                formErrors.style.display = 'block';
                errorList.innerHTML = '';
                <% errors.forEach((error, index) => { %>
                    const errorItem<%= index %> = document.createElement('li');
                    errorItem<%= index %>.textContent = '<%= error.msg %>';
                    errorList.appendChild(errorItem<%= index %>);
                <% }) %>
            }
        <% } %>
        
        // Close message overlay when clicking outside
        const messageOverlay = document.getElementById('messageOverlay');
        if (messageOverlay) {
            messageOverlay.addEventListener('click', function(event) {
                if (event.target.classList.contains('message-overlay')) {
                    closeMessage();
                }
            });
        }
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (modal && modal.style.display === 'block') {
                    closeModal();
                }
                if (document.getElementById('messageOverlay')) {
                    closeMessage();
                }
            }
        });
        
        }); // End DOMContentLoaded
    </script>
    
    <style>
        /* Message Overlay Styles */
        .message-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeIn 0.3s ease-out;
            backdrop-filter: blur(4px);
        }

        .message-overlay.fade-out {
            animation: fadeOut 0.3s ease-out;
        }

        .success-message-modal,
        .error-message-modal {
            background: white;
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            max-width: 500px;
            width: 90%;
            margin: 0 20px;
            animation: slideUp 0.3s ease-out;
            position: relative;
            overflow: hidden;
        }

        .success-message-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #10B981, #34D399);
        }

        .error-message-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #EF4444, #F87171);
        }

        .message-content {
            padding: 32px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
        }

        .message-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 20px;
        }

        .success-icon {
            color: #10B981;
            background-color: #ECFDF5;
            border: 3px solid #D1FAE5;
        }

        .error-icon {
            color: #EF4444;
            background-color: #FEF2F2;
            border: 3px solid #FECACA;
        }

        .message-text h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 0 12px 0;
            color: #1F2937;
        }

        .message-text p {
            font-size: 1rem;
            color: #6B7280;
            margin: 0 0 20px 0;
            line-height: 1.6;
        }

        .message-details {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: #6B7280;
            font-size: 0.9rem;
        }

        .detail-item i {
            color: #10B981;
            width: 16px;
            text-align: center;
        }

        .error-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        .error-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #EF4444;
            font-size: 0.95rem;
            text-align: left;
            background-color: #FEF2F2;
            padding: 12px 16px;
            border-radius: 8px;
            border-left: 3px solid #EF4444;
        }

        .error-item i {
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #9CA3AF;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s ease;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            background-color: #F3F4F6;
            color: #374151;
            transform: scale(1.1);
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Form errors in modal */
        .form-errors {
            background-color: #FEF2F2;
            border: 1px solid #FECACA;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }
        
        .error-header {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #EF4444;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .form-errors ul {
            margin: 0;
            padding-left: 20px;
            color: #DC2626;
        }
        
        .form-errors li {
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
    </style>
</body>
</html>