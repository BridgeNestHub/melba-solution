<!-- Footer -->
<footer class="footer">
    <div class="footer-content">
        <div class="footer-section">
            <h3>MelbaSolution</h3>
            <p>Taking local businesses global through digital transformation.</p>
            <div class="footer-contact">
                <p><i class="fas fa-envelope"></i> contact@melbasolution.com</p>
                <p><i class="fas fa-phone"></i> +1 (206) 240-9455</p>
            </div>
        </div>
        <div class="footer-section">
            <h3>Quick Links</h3>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/services">Services</a></li>
                <!-- <li><a href="/portfolio">Portfolio</a></li> -->
                <li><a href="/about">About Us</a></li>
                <li><a href="/testimonials">Testimonials</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Services</h3>
            <ul>
                <li><a href="/services#web-development">Web Development</a></li>
                <li><a href="/services#branding">Branding</a></li>
                <li><a href="/services#marketing">Digital Marketing</a></li>
                <li><a href="/services#ecommerce">E-commerce</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Connect</h3>
            <div class="social-links">
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
            </div>
            <div class="newsletter">
                <h4>Subscribe to our newsletter</h4>
                <form class="newsletter-form" id="newsletterForm">
                    <input type="email" name="email" placeholder="Your email" required>
                    <button type="submit"><i class="fas fa-paper-plane"></i></button>
                </form>
                <div id="newsletter-message" style="margin-top: 10px; font-size: 14px;"></div>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; <%= new Date().getFullYear() %> MelbaSolution Digital Agency. All rights reserved.</p>
        <div class="legal-links">
            <a href="#" data-modal="privacyModal">Privacy Policy</a>
            <span class="legal-separator">|</span>
            <a href="#" data-modal="termsModal">Terms of Service</a>
        </div>
    </div>
</footer>

<!-- Privacy Policy Modal -->
<div id="privacyModal" class="footer-modal">
    <div class="footer-modal-content">
        <div class="footer-modal-header">
            <h2>Privacy Policy</h2>
            <span class="footer-modal-close" data-close="privacyModal">&times;</span>
        </div>
        <div class="footer-modal-body">
            <p><strong>Last updated:</strong> <%= new Date().toLocaleDateString() %></p>
            
            <h3>Information We Collect</h3>
            <p>We collect information you provide directly to us, such as when you contact us through our website forms, subscribe to our newsletter, or communicate with us via phone or email.</p>
            
            <h3>How We Use Your Information</h3>
            <p>We use the information we collect to:</p>
            <ul>
                <li>Provide, maintain, and improve our digital transformation services</li>
                <li>Respond to your inquiries and provide customer support</li>
                <li>Send you updates about our services and industry insights</li>
                <li>Process payments and manage your account</li>
                <li>Comply with legal obligations</li>
            </ul>
            
            <h3>Information Sharing</h3>
            <p>We do not sell, trade, or otherwise transfer your personal information to third parties without your consent, except as described in this policy or as required by law.</p>
            
            <h3>Data Security</h3>
            <p>We implement appropriate technical and organizational security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.</p>
            
            <h3>Your Rights</h3>
            <p>You have the right to access, update, or delete your personal information. You may also opt out of marketing communications at any time.</p>
            
            <h3>Contact Us</h3>
            <p>If you have any questions about this Privacy Policy, please contact us at:</p>
            <p><strong>Email:</strong> contact@melbasolution.com<br>
            <strong>Phone:</strong> +1 (206) 240-9455</p>
        </div>
    </div>
</div>

<!-- Terms of Service Modal -->
<div id="termsModal" class="footer-modal">
    <div class="footer-modal-content">
        <div class="footer-modal-header">
            <h2>Terms of Service</h2>
            <span class="footer-modal-close" data-close="termsModal">&times;</span>
        </div>
        <div class="footer-modal-body">
            <p><strong>Last updated:</strong> <%= new Date().toLocaleDateString() %></p>
            
            <h3>Acceptance of Terms</h3>
            <p>By accessing and using MelbaSolution's website and services, you accept and agree to be bound by the terms and provisions of this agreement.</p>
            
            <h3>Services</h3>
            <p>MelbaSolution provides comprehensive digital transformation services including:</p>
            <ul>
                <li>Web development and design</li>
                <li>Brand identity and strategy</li>
                <li>Digital marketing and SEO</li>
                <li>E-commerce solutions</li>
                <li>Business consulting</li>
            </ul>
            
            <h3>User Responsibilities</h3>
            <p>You agree to use our services only for lawful purposes and in accordance with these Terms of Service. You are responsible for providing accurate information and maintaining the confidentiality of your account.</p>
            
            <h3>Payment Terms</h3>
            <p>Payment terms will be specified in individual service agreements. Generally, a 50% deposit is required to begin work, with the remainder due upon project completion.</p>
            
            <h3>Intellectual Property</h3>
            <p>All content, features, and functionality on our website are owned by MelbaSolution and are protected by copyright and other intellectual property laws. Upon full payment, clients receive ownership of custom work created specifically for them.</p>
            
            <h3>Limitation of Liability</h3>
            <p>MelbaSolution shall not be liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use of our services.</p>
            
            <h3>Termination</h3>
            <p>Either party may terminate services with written notice. Refunds will be provided for unused services according to our refund policy.</p>
            
            <h3>Contact Information</h3>
            <p>For questions about these Terms of Service, please contact us at:</p>
            <p><strong>Email:</strong> contact@melbasolution.com<br>
            <strong>Phone:</strong> +1 (206) 240-9455</p>
        </div>
    </div>
</div>

<!-- Chat Widget -->
<div class="chat-widget">
    <button class="chat-button">
        <i class="fas fa-comment"></i>
        Chat with us
    </button>
</div>

<style>
/* Override footer styles to ensure centering */
.footer-bottom {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    text-align: center !important;
    padding: 20px 0 !important;
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
    margin-top: 30px !important;
    gap: 10px !important;
}

.footer-bottom p {
    margin: 0 !important;
    color: rgba(255, 255, 255, 0.7) !important;
}

.legal-links {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 15px !important;
    margin: 0 !important;
}

.legal-separator {
    color: rgba(255, 255, 255, 0.4) !important;
    font-weight: 300 !important;
    user-select: none !important;
}

.legal-links a {
    color: rgba(255, 255, 255, 0.7) !important;
    text-decoration: none !important;
    transition: color 0.3s ease !important;
    cursor: pointer !important;
}

.legal-links a:hover {
    color: #2f5fda !important;
}

/* Newsletter form responsive styles */
.newsletter-form {
    display: flex !important;
    margin-top: 10px !important;
}

.newsletter-form input {
    flex: 1 !important;
    padding: 12px 16px !important;
    border: 1px solid #ddd !important;
    border-radius: 4px 0 0 4px !important;
    border-right: none !important;
    background: white !important;
    color: #333 !important;
    font-size: 16px !important;
    min-width: 200px !important;
}

.newsletter-form input::placeholder {
    color: #666 !important;
}

.newsletter-form button {
    background-color: #2f5fda !important;
    color: white !important;
    border: none !important;
    padding: 12px 16px !important;
    border-radius: 0 4px 4px 0 !important;
    cursor: pointer !important;
    transition: background-color 0.3s ease !important;
    font-size: 16px !important;
}

.newsletter-form button:hover {
    background-color: #1e3ea8 !important;
}

/* Responsive newsletter form */
@media (max-width: 768px) {
    .newsletter {
        margin-top: 20px !important;
    }
    
    .newsletter h4 {
        font-size: 16px !important;
        margin-bottom: 10px !important;
    }
    
    .newsletter-form {
        max-width: 300px !important;
        margin: 0 auto !important;
    }
    
    .newsletter-form input {
        padding: 10px 12px !important;
        font-size: 14px !important;
        min-width: 180px !important;
    }
    
    .newsletter-form button {
        padding: 10px 12px !important;
        font-size: 14px !important;
    }
}

@media (max-width: 480px) {
    .newsletter-form {
        max-width: 280px !important;
    }
    
    .newsletter-form input {
        padding: 8px 10px !important;
        font-size: 13px !important;
        min-width: 160px !important;
    }
    
    .newsletter-form button {
        padding: 8px 10px !important;
        font-size: 13px !important;
    }
}

/* Modal styles with higher specificity */
.footer-modal {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    animation: fadeIn 0.3s ease;
}

.footer-modal-content {
    background-color: white;
    margin: 3% auto;
    padding: 0;
    border-radius: 12px;
    width: 90%;
    max-width: 700px;
    max-height: 85vh;
    overflow-y: auto;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
    animation: slideUp 0.3s ease;
}

.footer-modal-header {
    background: linear-gradient(135deg, #2f5fda, #1e3ea8);
    color: white;
    padding: 25px;
    border-radius: 12px 12px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.footer-modal-header h2 {
    margin: 0;
    color: white;
    font-size: 1.5rem;
}

.footer-modal-close {
    color: white;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    line-height: 1;
    padding: 5px;
    border-radius: 50%;
    transition: all 0.3s ease;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.footer-modal-close:hover {
    background-color: rgba(255, 255, 255, 0.2);
    transform: scale(1.1);
}

.footer-modal-body {
    padding: 25px;
    line-height: 1.6;
    color: #333;
}

.footer-modal-body h3 {
    color: #2f5fda;
    margin-top: 25px;
    margin-bottom: 12px;
    font-size: 1.2rem;
}

.footer-modal-body h3:first-child {
    margin-top: 0;
}

.footer-modal-body p {
    margin-bottom: 15px;
    color: #555;
}

.footer-modal-body strong {
    color: #333;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from {
        transform: translateY(50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@media (max-width: 768px) {
    .legal-links {
        flex-direction: column !important;
        gap: 10px !important;
    }
    
    .legal-separator {
        display: none !important;
    }
    
    .footer-modal-content {
        width: 95%;
        margin: 5% auto;
    }
    
    .footer-modal-header,
    .footer-modal-body {
        padding: 20px;
    }
    
    .footer-modal-header h2 {
        font-size: 1.3rem;
    }
}
</style>

<script>
// Footer Modal functions - CSP compliant
document.addEventListener('DOMContentLoaded', function() {
    // Open modal event listeners
    document.querySelectorAll('[data-modal]').forEach(function(link) {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const modalId = this.getAttribute('data-modal');
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        });
    });
    
    // Close modal event listeners
    document.querySelectorAll('[data-close]').forEach(function(closeBtn) {
        closeBtn.addEventListener('click', function() {
            const modalId = this.getAttribute('data-close');
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
    });
    
    // Close modal when clicking outside
    document.addEventListener('click', function(event) {
        if (event.target.classList.contains('footer-modal')) {
            event.target.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    });
    
    // Close modal with Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            const openModals = document.querySelectorAll('.footer-modal[style*="block"]');
            openModals.forEach(modal => {
                modal.style.display = 'none';
            });
            document.body.style.overflow = 'auto';
        }
    });
});

// Newsletter form submission
document.getElementById('newsletterForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const email = formData.get('email');
    const messageDiv = document.getElementById('newsletter-message');
    
    try {
        const response = await fetch('/newsletter', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email })
        });
        
        const result = await response.json();
        
        if (result.success) {
            messageDiv.innerHTML = '<span style="color: #4caf50;">' + result.message + '</span>';
            e.target.reset();
        } else {
            messageDiv.innerHTML = '<span style="color: #f44336;">' + result.message + '</span>';
        }
    } catch (error) {
        messageDiv.innerHTML = '<span style="color: #f44336;">Sorry, there was an error. Please try again.</span>';
    }
    
    // Clear message after 5 seconds
    setTimeout(() => {
        messageDiv.innerHTML = '';
    }, 5000);
});
</script>